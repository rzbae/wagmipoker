<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Texas Hold'em Poker</title>
    <style>
        body {
            background-color: #2b2d42;
            color: #edf2f4;
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
        }
        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #1c1f33;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
            width: 90%;
            max-width: 1000px;
            min-height: 85vh;
        }
        .table {
            background-color: #4c566a;
            border-radius: 15px;
            padding: 15px;
            width: 100%;
            display: flex;
            justify-content: space-around;
            align-items: center;
            flex-wrap: wrap;
        }
        .card {
            width: 50px;
            height: 75px;
            background-color: #d4a373;
            border-radius: 5px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            color: #1c1f33;
            font-weight: bold;
            margin: 5px;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
            opacity: 0;
            transform: translateY(-20px);
            transition: all 0.3s ease-in-out;
        }
        .card.show {
            opacity: 1;
            transform: translateY(0);
        }
        .actions {
            margin-top: 20px;
        }
        .actions button {
            background-color: #ef233c;
            color: #fff;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            font-size: 16px;
            cursor: pointer;
            border-radius: 5px;
            transition: background-color 0.3s;
        }
        .actions button:hover {
            background-color: #d90429;
        }
        .actions button:disabled {
            background-color: #8d99ae;
            cursor: not-allowed;
        }
        .info {
            margin: 10px;
            font-size: 18px;
            text-align: center;
        }
        .player-cards, .bot-cards, .community-cards {
            display: flex;
            justify-content: center;
            margin: 10px 0;
        }
        .pot, .chips {
            font-size: 20px;
            font-weight: bold;
            margin: 5px;
        }
        .pot {
            color: #e9c46a;
        }
        .chips {
            color: #06d6a0;
        }
        h1 {
            color: #e76f51;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Texas Hold'em Poker</h1>
        <div class="table">
            <div class="info pot" id="pot-info">Банк: 0 фишек</div>
            <div class="community-cards" id="community-cards">
                <!-- Карты на столе -->
            </div>
            <div class="player-cards" id="player-cards">
                <!-- Карты игрока -->
            </div>
            <div class="bot-cards" id="bot-cards">
                <!-- Карты бота -->
            </div>
            <div class="info chips" id="player-chips">Ваши фишки: 100</div>
            <div class="info chips" id="bot-chips">Фишки бота: 100</div>
        </div>
        <div class="actions" id="actions">
            <button onclick="startGame()">Начать игру</button>
        </div>
    </div>
    <script>
        let playerChips = 100;
        let botChips = 100;
        let playerHand = [];
        let botHand = [];
        let communityCards = [];
        let pot = 0;
        let currentBet = 10;
        const deck = createDeck();

        function createDeck() {
            const suits = ['♠', '♥', '♣', '♦'];
            const ranks = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'];
            const deck = [];
            for (let suit of suits) {
                for (let rank of ranks) {
                    deck.push(`${rank}${suit}`);
                }
            }
            return deck;
        }

        function startGame() {
            resetGame();
            shuffle(deck);
            playerHand = drawCards(2);
            botHand = drawCards(2);
            updateUI();
            setTimeout(() => {
                showFlop();
            }, 1000);
        }

        function resetGame() {
            communityCards = [];
            pot = 0;
            currentBet = 10;
            document.getElementById('actions').innerHTML = '';
            document.getElementById('player-cards').innerHTML = '';
            document.getElementById('bot-cards').innerHTML = '';
            document.getElementById('community-cards').innerHTML = '';
        }

        function drawCards(num) {
            return deck.splice(0, num);
        }

        function shuffle(deck) {
            for (let i = deck.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [deck[i], deck[j]] = [deck[j], deck[i]];
            }
        }

        function showFlop() {
            communityCards = drawCards(3);
            updateUI();
            setTimeout(() => {
                showTurn();
            }, 1000);
        }

        function showTurn() {
            communityCards.push(drawCards(1)[0]);
            updateUI();
            setTimeout(() => {
                showRiver();
            }, 1000);
        }

        function showRiver() {
            communityCards.push(drawCards(1)[0]);
            updateUI();
            setTimeout(() => {
                determineWinner();
            }, 1000);
        }

        function updateUI() {
            const playerCardsElem = document.getElementById('player-cards');
            const botCardsElem = document.getElementById('bot-cards');
            const communityCardsElem = document.getElementById('community-cards');
            const potElem = document.getElementById('pot-info');
            const playerChipsElem = document.getElementById('player-chips');
            const botChipsElem = document.getElementById('bot-chips');

            playerHand.forEach((card, index) => {
                let cardElem = createCardElement(card);
                setTimeout(() => cardElem.classList.add('show'), index * 300);
                playerCardsElem.appendChild(cardElem);
            });

            botHand.forEach((card, index) => {
                let cardElem = createCardElement('?');
                setTimeout(() => cardElem.classList.add('show'), index * 300);
                botCardsElem.appendChild(cardElem);
            });

            communityCards.forEach((card, index) => {
                let cardElem = createCardElement(card);
                setTimeout(() => cardElem.classList.add('show'), index * 300);
                communityCardsElem.appendChild(cardElem);
            });

            potElem.textContent = `Банк: ${pot} фишек`;
            playerChipsElem.textContent = `Ваши фишки: ${playerChips}`;
            botChipsElem.textContent = `Фишки бота: ${botChips}`;
        }

        function createCardElement(card) {
            let cardElem = document.createElement('div');
            cardElem.classList.add('card');
            cardElem.innerText = card;
            return cardElem;
        }

        function determineWinner() {
            const playerScore = calculateHandScore(playerHand.concat(communityCards));
            const botScore = calculateHandScore(botHand.concat(communityCards));

            let result;
            if (playerScore > botScore) {
                playerChips += pot;
                result = "Вы выиграли!";
            } else if (playerScore < botScore) {
                botChips += pot;
                result = "Бот выиграл!";
            } else {
                playerChips += pot / 2;
                botChips += pot / 2;
                result = "Ничья!";
            }

            document.getElementById('actions').innerHTML = `
                <div class="info">${result}</div>
                <button onclick="startGame()">Играть снова</button>
            `;
            updateUI();
        }

        function calculateHandScore(hand) {
            // Функция определения комбинаций и расчета очков
            const ranks = hand.map(card => card.slice(0, -1));
            const suits = hand.map(card => card.slice(-1));
            const rankCount = ranks.reduce((acc, rank) => {
                acc[rank] = (acc[rank] || 0) + 1;
                return acc;
            }, {});
            const suitCount = suits.reduce((acc, suit) => {
                acc[suit] = (acc[suit] || 0) + 1;
                return acc;
            }, {});

            const uniqueRanks = Object.keys(rankCount);
            const uniqueSuits = Object.keys(suitCount);
            const isFlush = uniqueSuits.some(suit => suitCount[suit] >= 5);
            const isStraight = uniqueRanks.length >= 5 && uniqueRanks.slice(-5).every((rank, i, arr) => i === 0 || arr[i - 1] - rank === 1);

            if (isFlush && isStraight) return 9; // Стрит-флеш
            if (uniqueRanks.some(rank => rankCount[rank] === 4)) return 8; // Каре
            if (uniqueRanks.some(rank => rankCount[rank] === 3) && uniqueRanks.some(rank => rankCount[rank] === 2)) return 7; // Фулл-хаус
            if (isFlush) return 6; // Флеш
            if (isStraight) return 5; // Стрит
            if (uniqueRanks.some(rank => rankCount[rank] === 3)) return 4; // Сет
            if (uniqueRanks.filter(rank => rankCount[rank] === 2).length >= 2) return 3; // Две пары
            if (uniqueRanks.some(rank => rankCount[rank] === 2)) return 2; // Одна пара
            return 1; // Старшая карта
        }
    </script>
</body>
</html>
